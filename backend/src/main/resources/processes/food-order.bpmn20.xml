<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:flowable="http://flowable.org/bpmn" targetNamespace="http://example.com/bpmn/food-order" exporter="bpmn-js (https://demo.bpmn.io)" exporterVersion="18.6.1">
  <process id="foodOrderProcess" name="Food Order Process" isExecutable="true">
    <startEvent id="start" name="Sipariş Alındı"/>
    <serviceTask id="paymentTask" name="Ödemeyi Onayla" flowable:delegateExpression="${paymentApprovalDelegate}"/>
    <exclusiveGateway id="paymentApprovedGateway" name="Ödeme Onaylandı mı?"/>
    <userTask id="reviewOrder" name="Siparişi Onayla" flowable:assignee="chef">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${orderStatusUpdateListener}"/>
      </extensionElements>
    </userTask>
    <exclusiveGateway id="orderApprovedGateway" name="Sipariş Onaylandı mı?"/>
    <userTask id="prepareOrder" name="Hazırla" flowable:assignee="kitchen">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${orderStatusUpdateListener}"/>
      </extensionElements>
    </userTask>
    <endEvent id="endSuccess" name="Teslim Edildi">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${orderStatusUpdateListener}"/>
      </extensionElements>
    </endEvent>
    <endEvent id="endRejected" name="Reddedildi">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${orderStatusUpdateListener}"/>
      </extensionElements>
    </endEvent>
    <sequenceFlow id="flow1" sourceRef="start" targetRef="paymentTask"/>
    <sequenceFlow id="flow2" sourceRef="paymentTask" targetRef="paymentApprovedGateway"/>
    <sequenceFlow id="flow3" sourceRef="paymentApprovedGateway" targetRef="reviewOrder">
      <conditionExpression xsi:type="tFormalExpression">${paymentApproved}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flowRejectPayment" sourceRef="paymentApprovedGateway" targetRef="endRejected">
      <conditionExpression xsi:type="tFormalExpression">${!paymentApproved}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow4" sourceRef="reviewOrder" targetRef="orderApprovedGateway"/>
    <sequenceFlow id="flow5" sourceRef="orderApprovedGateway" targetRef="prepareOrder">
      <conditionExpression xsi:type="tFormalExpression">${approved}</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow6" sourceRef="prepareOrder" targetRef="shipOrder"/>
    <sequenceFlow id="flow7" sourceRef="shipOrder" targetRef="endSuccess"/>
    <sequenceFlow id="flow8" sourceRef="orderApprovedGateway" targetRef="endRejected">
      <conditionExpression xsi:type="tFormalExpression">${!approved}</conditionExpression>
    </sequenceFlow>
    <userTask id="shipOrder" name="Kuryeye Ver" flowable:assignee="courier">
      <extensionElements>
        <flowable:executionListener event="start" delegateExpression="${orderStatusUpdateListener}"/>
      </extensionElements>
      <incoming>flow6</incoming>
      <outgoing>flow7</outgoing>
    </userTask>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_foodOrderProcess">
    <bpmndi:BPMNPlane id="BPMNPlane_foodOrderProcess" bpmnElement="foodOrderProcess">
      <bpmndi:BPMNShape id="BPMNShape_prepareOrder" bpmnElement="prepareOrder">
        <omgdc:Bounds x="780" y="190" width="110" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_endRejected" bpmnElement="endRejected">
        <omgdc:Bounds x="580" y="370" width="36" height="36"/>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="572" y="406" width="52" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_orderApprovedGateway" bpmnElement="orderApprovedGateway" isMarkerVisible="true">
        <omgdc:Bounds x="675" y="205" width="50" height="50"/>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="585.5" y="225.5" width="87" height="27"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_paymentApprovedGateway" bpmnElement="paymentApprovedGateway" isMarkerVisible="true">
        <omgdc:Bounds x="475" y="255" width="50" height="50"/>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="525" y="286" width="90" height="27"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_reviewOrder" bpmnElement="reviewOrder">
        <omgdc:Bounds x="530" y="80" width="110" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_paymentTask" bpmnElement="paymentTask">
        <omgdc:Bounds x="280" y="240" width="110" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_start" bpmnElement="start">
        <omgdc:Bounds x="172" y="260" width="36" height="36"/>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="158" y="296" width="65" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_113z6r5_di" bpmnElement="shipOrder">
        <omgdc:Bounds x="930" y="190" width="100" height="80"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_endSuccess" bpmnElement="endSuccess">
        <omgdc:Bounds x="1080" y="212" width="36" height="36"/>
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1067" y="248" width="62" height="14"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_flow1" bpmnElement="flow1">
        <omgdi:waypoint x="208" y="278"/>
        <omgdi:waypoint x="280" y="278"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow2" bpmnElement="flow2">
        <omgdi:waypoint x="390" y="278"/>
        <omgdi:waypoint x="477" y="278"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow3" bpmnElement="flow3">
        <omgdi:waypoint x="500" y="255"/>
        <omgdi:waypoint x="500" y="110"/>
        <omgdi:waypoint x="530" y="110"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flowRejectPayment" bpmnElement="flowRejectPayment">
        <omgdi:waypoint x="500" y="305"/>
        <omgdi:waypoint x="500" y="388"/>
        <omgdi:waypoint x="580" y="388"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow4" bpmnElement="flow4">
        <omgdi:waypoint x="640" y="108"/>
        <omgdi:waypoint x="700" y="108"/>
        <omgdi:waypoint x="700.0" y="205.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow5" bpmnElement="flow5">
        <omgdi:waypoint x="725" y="230"/>
        <omgdi:waypoint x="780" y="230"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow6" bpmnElement="flow6">
        <omgdi:waypoint x="890" y="230"/>
        <omgdi:waypoint x="930" y="230"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow7" bpmnElement="flow7">
        <omgdi:waypoint x="1030" y="230"/>
        <omgdi:waypoint x="1080" y="230"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_flow8" bpmnElement="flow8">
        <omgdi:waypoint x="700" y="255"/>
        <omgdi:waypoint x="700" y="388"/>
        <omgdi:waypoint x="616" y="388"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
